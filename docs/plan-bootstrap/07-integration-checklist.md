# âœ… Bootstrap Integration Checklist

**Generated by:** Claude (claude-sonnet-4-5-20250929)
**Date:** 2025-11-08
**Status:** Completion criteria

---

## Overview

This checklist tracks progress from initial setup to working MVP. Each item represents a verifiable milestone.

## Phase 0: Project Setup

### Workspace Structure
- [ ] Cargo workspace created (`Cargo.toml` in root)
- [ ] `bevy-terminal` crate created
- [ ] `examples/claude_crt` example created
- [ ] Directory structure matches plan

### Configuration Files
- [ ] `.rustfmt.toml` added
- [ ] `.cargo/config.toml` added
- [ ] `.github/workflows/ci.yml` added
- [ ] `.gitignore` updated for Rust

### Dependencies
- [ ] `bevy = "0.17"` in workspace dependencies
- [ ] `alacritty_terminal = "0.25"` added
- [ ] `portable-pty = "0.8"` added
- [ ] `ab_glyph = "0.2"` added
- [ ] `anyhow` and `thiserror` added
- [ ] All dependencies compile

### Font Assets
- [ ] Cascadia Mono fonts downloaded
- [ ] `CascadiaMono-Regular.ttf` in `bevy-terminal/assets/fonts/`
- [ ] Font file verified (valid TTF format)

### Build Verification
- [ ] `cargo build` succeeds
- [ ] `cargo clippy` passes (no warnings)
- [ ] `cargo fmt --check` passes
- [ ] `cargo test` runs (0 tests OK)
- [ ] `cargo run --example claude_crt` opens window

### Version Control
- [ ] jj change created: "chore: Initialize project structure"
- [ ] jj description complete (Why, Approach, Status)
- [ ] Change pushed to remote
- [ ] CI pipeline runs successfully

---

## Phase 1: Terminal Backend

### PTY Module (`src/pty.rs`)
- [ ] `PtyResource` defined
- [ ] `spawn_pty()` function implemented
- [ ] PTY spawns in Startup system
- [ ] PTY uses portable-pty API
- [ ] Default shell spawned (bash/zsh)
- [ ] Error handling with `anyhow`
- [ ] Logging added (info, debug, error)

### Terminal State (`src/terminal.rs`)
- [ ] `TerminalState` resource defined
- [ ] Integrated `alacritty_terminal::Term`
- [ ] Hardcoded size: 120 cols Ã— 30 rows
- [ ] Tokyo Night colors configured
- [ ] Resource initialized in plugin

### PTY Polling
- [ ] `poll_pty()` system implemented
- [ ] Non-blocking read from PTY
- [ ] Bytes fed to `Term.process()`
- [ ] System runs in `Update`
- [ ] Handles `WouldBlock` errors gracefully
- [ ] Logs bytes received (debug level)

### Input Handling (`src/input.rs`)
- [ ] `handle_input()` system implemented
- [ ] Keyboard events captured
- [ ] ASCII keys mapped (a-z, 0-9, symbols)
- [ ] Special keys mapped (Enter, Backspace, Arrows)
- [ ] Ctrl+key combinations handled
- [ ] Bytes written to PTY writer
- [ ] Input only active when terminal focused

### Integration Tests
- [ ] PTY spawns successfully
- [ ] Shell prompt appears in grid
- [ ] Typing updates grid
- [ ] Commands execute (tested with `ls`)
- [ ] Grid content logged for verification

### Version Control
- [ ] jj change: "feat: Implement persistent PTY and terminal state"
- [ ] Description complete
- [ ] All tests pass
- [ ] Change pushed

---

## Phase 2: Font System & Glyph Atlas

### Font Module (`src/font.rs`)
- [ ] `FontMetrics` struct defined
- [ ] Font loads from bundled Cascadia Mono
- [ ] Font size: 14pt (hardcoded)
- [ ] Cell width calculated
- [ ] Cell height calculated
- [ ] Baseline offset calculated
- [ ] Metrics resource initialized

### Atlas Module (`src/atlas.rs`)
- [ ] `GlyphAtlas` struct defined
- [ ] Atlas size: 4096Ã—4096 (or larger)
- [ ] Pre-render ASCII (32-126)
- [ ] Pre-render box-drawing (U+2500-257F)
- [ ] Pre-render block elements (U+2580-259F)
- [ ] UV map built (char â†’ Rect)
- [ ] Texture data in RGBA8 format

### Glyph Rasterization
- [ ] Uses `ab_glyph` for rasterization
- [ ] Grayscale anti-aliasing enabled
- [ ] Glyphs centered in cells
- [ ] Baseline alignment correct
- [ ] No bleeding between cells

### Quality Verification
- [ ] Atlas texture displayed as sprite (debug view)
- [ ] All glyphs visible and crisp
- [ ] Box-drawing characters align perfectly
- [ ] No artifacts or blurriness
- [ ] Cell dimensions uniform

### Integration Tests
- [ ] Font loads without error
- [ ] Atlas generation completes
- [ ] All expected characters in UV map
- [ ] Lookup returns valid UVs

### Version Control
- [ ] jj change: "feat: Implement font loading and glyph atlas"
- [ ] Description complete
- [ ] Tests pass
- [ ] Change pushed

---

## Phase 3: Render-to-Texture

### Renderer Module (`src/renderer.rs`)
- [ ] `TerminalTexture` resource defined
- [ ] Image texture created (correct dimensions)
- [ ] Texture format: `Rgba8UnormSrgb`
- [ ] Handle<Image> stored in resource
- [ ] Resource exposed via public API

### Grid Rendering
- [ ] `render_terminal_grid()` system implemented
- [ ] Iterates terminal grid
- [ ] Looks up glyphs from atlas
- [ ] Blits glyphs to terminal texture
- [ ] Applies foreground color
- [ ] Applies background color
- [ ] Handles missing glyphs gracefully

### Color System (`src/colors.rs`)
- [ ] `TokyoNightColors` struct implemented
- [ ] All 16 ANSI colors defined
- [ ] Background color: #16161e
- [ ] Foreground color: #c0caf5
- [ ] Color mapping function implemented
- [ ] Colors match Tokyo Night theme

### Performance
- [ ] Dirty region tracking implemented
- [ ] Only changed cells re-rendered
- [ ] Texture upload optimized
- [ ] Frame time < 16ms (60 FPS)
- [ ] No visible lag or stuttering

### Quality Verification
- [ ] Terminal texture renders correctly
- [ ] Text is crisp and readable
- [ ] Colors accurate
- [ ] Box-drawing connects perfectly
- [ ] Updates in real-time

### Integration Tests
- [ ] Texture accessible via resource
- [ ] Can use Handle<Image> as sprite
- [ ] Typing updates texture
- [ ] Commands show output
- [ ] Colors render correctly

### Version Control
- [ ] jj change: "feat: Implement render-to-texture terminal rendering"
- [ ] Description complete
- [ ] Performance metrics documented
- [ ] Change pushed

---

## Phase 4: Game Integration (CRT Character)

### Example Application
- [ ] Claude character sprite spawned
- [ ] Uses terminal texture as sprite material
- [ ] Initial scale: 0.05 (tiny CRT head)
- [ ] Positioned in game world
- [ ] `ClaudeCharacter` marker component

### Zoom Interaction
- [ ] Proximity detection implemented
- [ ] 'E' key triggers zoom
- [ ] Smooth scale animation (0.05 â†’ 1.0)
- [ ] Terminal becomes fullscreen
- [ ] Input routing enabled

### Zoom Out
- [ ] ESC key triggers zoom out
- [ ] Smooth scale animation (1.0 â†’ 0.05)
- [ ] Back to tiny CRT head
- [ ] Input routing disabled

### Input Modes
- [ ] `TerminalInputMode` resource defined
- [ ] `Inactive` mode: no keyboard routing
- [ ] `Active` mode: keyboard â†’ terminal
- [ ] Help text updates based on mode
- [ ] Clear visual feedback

### State Persistence
- [ ] Terminal runs when tiny
- [ ] Terminal runs when fullscreen
- [ ] State persists across zoom cycles
- [ ] Command output continues in background
- [ ] History preserved

### Polish
- [ ] Smooth transitions
- [ ] No flickering
- [ ] Readable at all scales
- [ ] Good performance (60+ FPS)
- [ ] Help text clear and useful

### Live Demo Scenario
- [ ] Spawn terminal
- [ ] See shell prompt on tiny CRT
- [ ] Walk to character, press 'E'
- [ ] Zoom in smoothly
- [ ] Type command: `ls`
- [ ] See output
- [ ] Type: `ping 8.8.8.8`
- [ ] Press ESC to zoom out
- [ ] Walk around (ping continues)
- [ ] Zoom back in
- [ ] See continued ping output
- [ ] All works smoothly

### Version Control
- [ ] jj change: "feat: Add Claude CRT character example"
- [ ] Description complete
- [ ] Demo scenario documented
- [ ] Change pushed

---

## Final MVP Validation

### Code Quality
- [ ] All clippy warnings resolved
- [ ] All code formatted (`cargo fmt`)
- [ ] No `unwrap()` calls (use `?` or `expect()`)
- [ ] Error handling comprehensive
- [ ] Logging at appropriate levels
- [ ] Comments explain "why" not "what"

### Documentation
- [ ] README updated with build instructions
- [ ] Example usage documented
- [ ] Known limitations listed
- [ ] Architecture documented in technical-design.md
- [ ] All planning docs complete

### Testing
- [ ] All manual tests pass
- [ ] Critical integration tests pass
- [ ] Performance targets met
- [ ] No crashes in normal usage
- [ ] Works on Linux âœ…
- [ ] Works on Windows âœ…
- [ ] Works on macOS âœ…

### Platform Verification
- [ ] Linux build succeeds in CI
- [ ] Windows build succeeds in CI
- [ ] macOS build succeeds in CI
- [ ] Font renders correctly on all platforms
- [ ] PTY works on all platforms

### Live Demo Ready
- [ ] Example builds in < 30 seconds
- [ ] Startup time < 2 seconds
- [ ] Frame rate > 60 FPS
- [ ] No visual glitches
- [ ] Terminal responsive
- [ ] Demo scenario works smoothly
- [ ] Looks professional

### Repository Clean
- [ ] All jj changes pushed
- [ ] CI passing
- [ ] No uncommitted work
- [ ] No TODO comments in critical paths
- [ ] Version in Cargo.toml: 0.1.0

---

## Celebration ðŸŽ‰

### When All Boxes Checked:
- [ ] Take screenshot of working demo
- [ ] Write summary of achievements
- [ ] Document lessons learned
- [ ] Plan next features
- [ ] Share with community? (optional)

### Next Steps After MVP
- [ ] Multiple terminals architecture
- [ ] Font ligatures
- [ ] Emoji support
- [ ] Configuration system
- [ ] Scrollback buffer
- [ ] Copy/paste
- [ ] Publish as crate

---

**This checklist is your roadmap.** Check items as you complete them. Update in `jj describe` for persistence. The journey from empty repo to working demo is long but rewarding!

**MVP complete when all checkboxes are âœ…**
